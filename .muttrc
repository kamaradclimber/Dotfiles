set mbox_type=Maildir
set folder=$HOME/Mail/Gmail
set spoolfile="+INBOX"
set mbox = "+archive"
set postponed ="+drafts"
unset record

# Smtp configuration
set sendmail = /usr/bin/msmtp
set use_from=yes
set realname ="Gregoire Seux"
set envelope_from=yes
#see man msmtp for more information 

# mailboxes
mailboxes +INBOX  +[Gmail].Sent_Mail +[Gmail].Drafts  +[Gmail].All_Mail +rss

# bindings
macro index D "<save-message>+trash<enter>"   "move message to the trash"
macro index S "<save-message>+spam<enter>"    "mark message as spam"
folder-hook . macro index,pager y "<save-message>=[Gmail].All_Mail<enter>" "Archive"
folder-hook rss macro index,pager y "<save-message>=rss.bak<enter>" "Archive" #In case of rss, don't save itin All mail
#folder-hook rss macro index M "T~N<enter>;W;N" "Mark All as Read" 
macro index,pager <f2> "<change-folder>=INBOX<enter>" "Go to inbox"
macro index,pager <f3> "<change-folder>=rss<enter>" "Go to RSS folder"
macro pager \cb <pipe-entry>'urlscan'<enter> 'Follow links with urlview'


# main options
set from                = "kamaradclimber@gmail.com"              # who am i?
set mail_check          = 0                             # check for mail always
unset move                                              # gmail does that
set delete                                              # don't ask, just do
unset confirmappend                                     # don't ask, just do!
set quit                                                # don't ask, just do!!
unset mark_old                                          # read/new is good enough for me
unset beep                                              # remove beeeeeeeps
set mailcap_path       = ~/.mailcap
set strict_threads
auto_view text/html
alternative_order text/plain text/html
set sleep_time = 0 #no wait between folders

# index options
set sort                = threads                       # like gmail 
set sort_aux            = reverse-last-date-received    # like gmail
set sort_re                                             # thread based on reply_regexp

# pager
set pager_index_lines   = 8                             # show 8 messages when in pager
set pager_context       = 5                             # show five lines when skipping in pager
set pager_stop                                          # don't go to next message automatically
set menu_scroll                                         # scroll in menus 
unset smart_wrap                                          # don't split words
set tilde                                               # show tildes like in vim
unset markers                                           # no ugly plus signs

# composing mail
set fcc_attach                                          # save attachments with the body
unset mime_forward                                      # forward attachments as part of body
set forward_format      = "Fwd: %s"                     # format for subject when forwarding
set include                                             # include message in replies
set forward_quote                                       # include message in forwards
set edit_headers         =yes                            # Include headers in the mail composing buffer

# headers to show
ignore *                                                # ignore all headers
unignore from: to: cc: cci: Message-ID: In-Reply-To: Content-location: date: subject:                    # show only these
hdr_order from: to: cc: cci: Message-ID: In-Reply-To: Content-location: date: subject:                  # and in this order


# Colours
#color attachment white black
#color body yellow black [_a-z\.\$A-Z0-9-]+@[a-zA-Z0-9\./\-]+
#color body  white black .*
#color bold  brightwhite black
#color error red black
#color header  white black .*
#color hdrdefault  white black
#color index  white black .*
#color indicator  black red
#color markers  white black
#color message  white black
#color normal white black
#color quoted1 white blue
#color search  black yellow
#color signature cyan black
#color status black white
#color tilde  white black
#color tree  white black
#color underline  white black

## Theme kindly inspired from                                                                                                                                             
## http://nongeekshandbook.blogspot.ie/2009/03/mutt-color-configuration.html                                                                                              

## Colours for items in the index                                                                                                                                         
color index brightcyan black ~N
color index brightred black ~O
color index brightyellow black ~F
color index black green ~T
color index brightred black ~D
mono index bold ~N
mono index bold ~F
mono index bold ~T
mono index bold ~D

## Highlights inside the body of a message.                                                                                                                               

## URLs                                                                                                                                                                    
color body brightgreen black "(http|ftp|news|telnet|finger)://[^ \"\t\r\n]*"
color body brightgreen black "mailto:[-a-z_0-9.]+@[-a-z_0-9.]+"
mono body bold "(http|ftp|news|telnet|finger)://[^ \"\t\r\n]*"
mono body bold "mailto:[-a-z_0-9.]+@[-a-z_0-9.]+"

## Email addresses.                                                                                                                                                       
color body brightgreen black "[-a-z_0-9.%$]+@[-a-z_0-9.]+\\.[-a-z][-a-z]+"

## Header                                                                                                                                                                 
color header green black "^from:"
color header green black "^to:"
color header green black "^cc:"
color header green black "^date:"
color header yellow black "^newsgroups:"
color header yellow black "^reply-to:"
color header brightcyan black "^subject:"
color header red black "^x-spam-rule:"
color header green black "^x-mailer:"
color header yellow black "^message-id:"
color header yellow black "^Organization:"
color header yellow black "^Organisation:"
color header yellow black "^User-Agent:"
color header yellow black "^message-id: .*pine"
color header yellow black "^X-Fnord:"
color header yellow black "^X-WebTV-Stationery:"

color header red black "^x-spam-rule:"
color header green black "^x-mailer:"
color header yellow black "^message-id:"
color header yellow black "^Organization:"
color header yellow black "^Organisation:"
color header yellow black "^User-Agent:"
color header yellow black "^message-id: .*pine"
color header yellow black "^X-Fnord:"
color header yellow black "^X-WebTV-Stationery:"
color header yellow black "^X-Message-Flag:"
color header yellow black "^X-Spam-Status:"
color header yellow black "^X-SpamProbe:"
color header red black "^X-SpamProbe: SPAM"

## Coloring quoted text - coloring the first 7 levels:                                                                                                                    
color quoted cyan black
color quoted1 yellow black
color quoted2 red black
color quoted3 green black
color quoted4 cyan black
color quoted5 yellow black
color quoted6 red black
color quoted7 green black

## Default color definitions                                                                                                                                              
#color hdrdefault white green                                                                                                                                             
color signature cyan black
color indicator black cyan
#color attachment black green
color error red black
color message white black
color search brightwhite magenta
color status brightyellow blue
color tree brightblue black
color normal white black
color tilde green black
color bold brightyellow black
#color underline magenta black                                                                                                                                            
color markers brightcyan black

## Colour definitions when on a mono screen                                                                                                                               
mono bold bold
mono underline underline
mono indicator reverse



# Contacts : use goobooks
set query_command="goobook query '%s'"
macro index,pager a "<pipe-message>goobook add<return>" "add the send address to google contacts"
bind editor <Tab> complete-query
macro index <F8> \
      "<enter-command>unset wait_key<enter><shell-escape>notmuch-mutt --prompt search<enter><change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>" \
      "notmuch: search mail"
macro index <F9> \
      "<enter-command>unset wait_key<enter><pipe-message>notmuch-mutt thread<enter><change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter><enter-command>set wait_key<enter>" \
      "notmuch: reconstruct thread"
macro index <F6> \
      "<enter-command>unset wait_key<enter><pipe-message>notmuch-mutt tag -inbox<enter>" \
      "notmuch: remove message from inbox"
